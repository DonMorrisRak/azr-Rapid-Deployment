{"options":[{"enabled":false,"definition":{"id":"5d58cc01-7c75-450c-be18-a388ddb129ec"},"inputs":{"branchFilters":"[\"+refs/heads/*\"]","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"a9db38f9-9fdc-478c-b0f9-464221e58316"},"inputs":{"workItemType":"661872","assignToRequestor":"true","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"57578776-4c22-4526-aeb0-86b6da17ee9c"},"inputs":{}}],"variables":{"system.debug":{"value":"false","allowOverride":true},"sqlAdminPassword":{"value":""},"locshort":{"value":"NEU"},"originUrl":{"value":"www.site.com"}},"retentionRules":[{"branches":["+refs/heads/*"],"artifacts":[],"artifactTypesToDelete":["FilePath","SymbolStore"],"daysToKeep":10,"minimumToKeep":1,"deleteBuildRecord":true,"deleteTestResults":true}],"_links":{"self":{"href":"https://boysie-deploy.visualstudio.com/16ae9dc1-7600-47ae-bf52-c30513524998/_apis/build/Definitions/6"},"web":{"href":"https://boysie-deploy.visualstudio.com/_permalink/_build/index?collectionId=ab667eec-176c-4804-8c9d-4395844c3fb4&projectId=16ae9dc1-7600-47ae-bf52-c30513524998&definitionId=6"},"editor":{"href":"https://boysie-deploy.visualstudio.com/_permalink/_build/definitionEditor?collectionId=ab667eec-176c-4804-8c9d-4395844c3fb4&projectId=16ae9dc1-7600-47ae-bf52-c30513524998&definitionId=6"}},"jobAuthorizationScope":1,"jobTimeoutInMinutes":60,"jobCancelTimeoutInMinutes":5,"process":{"phases":[{"dependencies":[],"steps":[{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"UMBRACO-WEBAPP","timeoutInMinutes":0,"condition":"succeeded()","refName":"AzureResourceGroupDeployment1","task":{"id":"94a74903-f93f-4075-884f-dc11f34058b4","versionSpec":"2.*","definitionType":"task"},"inputs":{"ConnectedServiceName":"$(Parameters.ConnectedServiceName)","action":"Create Or Update Resource Group","resourceGroupName":"$(Parameters.resourceGroupName)","location":"$(Parameters.location)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$/Rapid Deployment/Templates/UMBR_WebApp.json","csmParametersFile":"$/Rapid Deployment/Templates/UMBR_WebApp.parameters.json","overrideParameters":"-AppServicePlanName \"$(locshort)-UMBRACO-ASP-CST-PRD\" -skuName \"S2\" -skuCapacity 2 -WebAppName1 \"$(locshort)-UMBRACO-WEBAPP-CST-PRD\" -netFrameworkVersion \"v4.6\" -phpVersion \"Off\" -pythonVersion \"Off\" -32Bit \"false\" -webSockets \"true\" -alwaysOn \"true\" -webServerLogging \"true\" -detailedErrors \"true\" -failedRequestTrace \"true\" -clientAffinityEnabled \"false\" -logSize 25","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","outputVariable":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"UMBRACO-REDIS","timeoutInMinutes":0,"condition":"succeeded()","refName":"AzureResourceGroupDeployment2","task":{"id":"94a74903-f93f-4075-884f-dc11f34058b4","versionSpec":"2.*","definitionType":"task"},"inputs":{"ConnectedServiceName":"$(Parameters.ConnectedServiceName)","action":"Create Or Update Resource Group","resourceGroupName":"$(Parameters.resourceGroupName)","location":"$(Parameters.location)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$/Rapid Deployment/Templates/UMBR_Redis.json","csmParametersFile":"$/Rapid Deployment/Templates/UMBR_Redis.parameters.json","overrideParameters":"-redisCacheName \"$(locshort)-UMBRACO-RDB-CST-PRD\" -redisCacheTier \"Standard\" -redisCacheFamily \"C\" -redisCacheCapacity 3 -enableNonSslPort true","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","outputVariable":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"UMBRACO-SQL","timeoutInMinutes":0,"condition":"succeeded()","refName":"AzureResourceGroupDeployment3","task":{"id":"94a74903-f93f-4075-884f-dc11f34058b4","versionSpec":"2.*","definitionType":"task"},"inputs":{"ConnectedServiceName":"$(Parameters.ConnectedServiceName)","action":"Create Or Update Resource Group","resourceGroupName":"$(Parameters.resourceGroupName)","location":"$(Parameters.location)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$/Rapid Deployment/Templates/UMBR_SQLpaas.json","csmParametersFile":"$/Rapid Deployment/Templates/UMBR_SQLpaas.parameters.json","overrideParameters":"-administratorLogin \"cst-adminprd\" -administratorLoginPassword $(sqlAdminPassword) -serverName \"$(locshort)-umbraco-mssql-server-cst-prd\" -elasticPoolName \"$(locshort)-umbraco-mssql-pool-cst-prd\" -edition \"Basic\" -poolDtu 100 -databaseDtuMin 10 -databaseDtuMax 100 -databaseNames [\"$(locshort)-umbraco-db-dbname-cst-prd\"] -transparentDataEncryption \"Disabled\" -databaseCollation \"SQL_Latin1_General_CP1_CI_AS\" -environment \"Production\" -buildDate $(buildDate) -buildBy $(buildBy)","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","outputVariable":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"UMBRACO-STORAGE","timeoutInMinutes":0,"condition":"succeeded()","refName":"AzureResourceGroupDeployment4","task":{"id":"94a74903-f93f-4075-884f-dc11f34058b4","versionSpec":"2.*","definitionType":"task"},"inputs":{"ConnectedServiceName":"$(Parameters.ConnectedServiceName)","action":"Create Or Update Resource Group","resourceGroupName":"$(Parameters.resourceGroupName)","location":"$(Parameters.location)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$/Rapid Deployment/Templates/UMBR_Storage.json","csmParametersFile":"$/Rapid Deployment/Templates/UMBR_Storage.parameters.json","overrideParameters":"-storageAccountType \"Standard_LRS\" -storageAccountCount 2 -startIndex 1 -storageAccountSuffix \"ubmrcstname\" -blobEncryptionEnabled true -accessTier \"Hot\" -environment \"Production\" -buildDate $(buildDate) -buildBy $(buildBy)","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","outputVariable":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"UMBRACO-CDN","timeoutInMinutes":0,"condition":"succeeded()","refName":"AzureResourceGroupDeployment5","task":{"id":"94a74903-f93f-4075-884f-dc11f34058b4","versionSpec":"2.*","definitionType":"task"},"inputs":{"ConnectedServiceName":"$(Parameters.ConnectedServiceName)","action":"Create Or Update Resource Group","resourceGroupName":"$(Parameters.resourceGroupName)","location":"$(Parameters.location)","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$/Rapid Deployment/Templates/UMBR_CDN.json","csmParametersFile":"$/Rapid Deployment/Templates/UMBR_CDN.parameters.json","overrideParameters":"-profileName \"$(locshort)-UMBRACO-CDN-CST-PRD\" -endpointName \"CST-SITE\" -originUrl $(originUrl ) -CDNSku \"Standard_Akamai\"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","outputVariable":""}}],"variables":{},"name":"Phase 1","target":{"demands":[],"executionOptions":{"type":0},"type":1},"jobAuthorizationScope":"projectCollection","jobCancelTimeoutInMinutes":1}],"type":1},"repository":{"properties":{"cleanOptions":"0","tfvcMapping":"{\"mappings\":[{\"serverPath\":\"$/Rapid Deployment\",\"mappingType\":\"map\",\"localPath\":\"\\\\\"},{\"serverPath\":\"$/Rapid Deployment/Drops\",\"mappingType\":\"cloak\",\"localPath\":\"\"}]}","labelSources":"0","labelSourcesFormat":"$(build.buildNumber)"},"id":"$/","type":"TfsVersionControl","url":"https://boysie-deploy.visualstudio.com/","defaultBranch":"$/Rapid Deployment","rootFolder":"$/Rapid Deployment","clean":"false","checkoutSubmodules":false},"processParameters":{"inputs":[{"options":{},"properties":{},"name":"ConnectedServiceName","label":"Azure subscription","defaultValue":"15cc0a48-8915-4047-9c8c-b27f931ff987","required":true,"type":"connectedService:AzureRM","helpMarkDown":"Select the Azure Resource Manager subscription for the deployment.","visibleRule":"","groupName":""},{"options":{},"properties":{"EditableOptions":"True"},"name":"resourceGroupName","label":"Resource group","defaultValue":"NEU-UMBR-RSG-CST-PRD","required":true,"type":"pickList","helpMarkDown":"Provide the name of a resource group.","visibleRule":"","groupName":""},{"options":{},"properties":{"EditableOptions":"True"},"name":"location","label":"Location","defaultValue":"North Europe","required":true,"type":"pickList","helpMarkDown":"Location for deploying the resource group. If the resource group already exists in the subscription, then this value will be ignored.","visibleRule":"","groupName":""}],"dataSourceBindings":[{"dataSourceName":"AzureResourceGroups","parameters":{},"endpointId":"$(ConnectedServiceName)","target":"resourceGroupName"},{"dataSourceName":"AzureLocations","parameters":{},"endpointId":"$(ConnectedServiceName)","target":"location"}]},"quality":1,"authoredBy":{"id":"f6cdb704-8167-4aa2-a561-e314c56677dc","displayName":"Mark Boys","uniqueName":"markboys@hotmail.co.uk","url":"https://app.vssps.visualstudio.com/Ad86e1155-1fde-490f-a2ac-74c691a1d480/_apis/Identities/f6cdb704-8167-4aa2-a561-e314c56677dc","imageUrl":"https://boysie-deploy.visualstudio.com/_api/_common/identityImage?id=f6cdb704-8167-4aa2-a561-e314c56677dc"},"queue":{"id":32,"name":"Hosted VS2017","pool":{"id":4,"name":"Hosted VS2017","isHosted":true}},"id":6,"name":"RapidDeployment-Umbraco","url":"https://boysie-deploy.visualstudio.com/16ae9dc1-7600-47ae-bf52-c30513524998/_apis/build/Definitions/6","uri":"vstfs:///Build/Definition/6","path":"\\","type":2,"queueStatus":0,"revision":2,"createdDate":"2017-10-03T14:50:12.290Z","project":{"id":"16ae9dc1-7600-47ae-bf52-c30513524998","name":"Rapid Deployment","url":"https://boysie-deploy.visualstudio.com/_apis/projects/16ae9dc1-7600-47ae-bf52-c30513524998","state":"wellFormed","revision":53,"visibility":0}}